{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/alexagrau/Documents/SeniorDesign/Senior-Design/screens/InboxAdmin.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Linking from \"react-native-web/dist/exports/Linking\";\nimport { Form, Button } from 'native-base';\nimport styles from \"../Style\";\nimport UserProfile from \"../UserProfile\";\nexport var InboxAdmin = function (_React$Component) {\n  _inherits(InboxAdmin, _React$Component);\n\n  var _super = _createSuper(InboxAdmin);\n\n  function InboxAdmin() {\n    var _this;\n\n    _classCallCheck(this, InboxAdmin);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      data: [],\n      number: '',\n      incidentNum: '',\n      readYn: ''\n    };\n\n    _this.fetchData = function _callee() {\n      var response, users;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch('http://localhost:3004/incidents'));\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(response.json());\n\n            case 5:\n              users = _context.sent;\n\n              _this.setState({\n                data: users\n              });\n\n              console.log('this is fetching data');\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    return _this;\n  }\n\n  _createClass(InboxAdmin, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fetchData();\n    }\n  }, {\n    key: \"setRead\",\n    value: function setRead(read, subject, sender, date, message, idincidents, phoneNumber) {\n      if (!read) {\n        fetch(\"http://10.0.0.13:3004/incidents\", {\n          method: 'POST',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify({\n            \"subject\": subject\n          }),\n          redirect: 'follow'\n        }).then(function (response) {\n          return response.text();\n        }).then(function (result) {\n          return console.log(result);\n        }).catch(function (error) {\n          return console.log('error', error);\n        });\n      }\n\n      this.fetchData();\n      this.props.navigation.navigate('ViewIndividualMessage', {\n        senderPass: sender,\n        datePass: date,\n        messPass: message,\n        subjectPass: subject,\n        idNumPass: idincidents,\n        phoneNumPass: phoneNumber\n      });\n      this.setState({\n        incidentNum: idincidents\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(View, {\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }\n      }, React.createElement(View, {\n        style: styles.header,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 17\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return Linking.openURL('https://www.asdenic.org');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }\n      }, React.createElement(Image, {\n        source: require(\"../assets/asdenic.png\"),\n        style: styles.asdenicLogo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 25\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return Linking.openURL('https://www.scu.edu/engineering/labs--research/labs/frugal-innovation-hub/');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }\n      }, React.createElement(Image, {\n        source: require(\"../assets/frugalHub.png\"),\n        style: styles.frugalHubLogo,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 25\n        }\n      })), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('Welcome');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: styles.logoutButton,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }\n      }, \"Cerrar sesi\\xF3n\"))), React.createElement(View, {\n        style: styles.pageContent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: styles.subheader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: styles.leftHeader,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 25\n        }\n      }, React.createElement(Button, {\n        style: styles.back,\n        onPress: function onPress() {\n          return _this2.props.navigation.navigate('WaterHomeAdmin');\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 29\n        }\n      }, React.createElement(Text, {\n        style: styles.backText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 33\n        }\n      }, '<', \" Atr\\xE1s\")))), React.createElement(Text, {\n        style: styles.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }\n      }, \"Buz\\xF3n de mensajes\"), React.createElement(View, {\n        style: styles.inboxBody,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 21\n        }\n      }, React.createElement(FlatList, {\n        inverted: true,\n        data: this.state.data,\n        getItemLayout: function getItemLayout(data, index) {\n          return {\n            length: 70,\n            offset: 70 * index,\n            index: index\n          };\n        },\n        initialScrollIndex: this.state.data.length - 1,\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item,\n              index = _ref.index;\n          return React.createElement(Button, {\n            style: styles.message,\n            onPress: function onPress() {\n              return _this2.setRead(item.readYn, item.subject, item.sender, item.date, item.message, item.idincidents, item.phoneNumber);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 107,\n              columnNumber: 29\n            }\n          }, React.createElement(View, {\n            style: styles.unread,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108,\n              columnNumber: 37\n            }\n          }, item.readYn ? React.createElement(Text, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 43\n            }\n          }) : React.createElement(Image, {\n            source: require(\"../assets/blue-circle.png\"),\n            style: styles.circle,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 43\n            }\n          })), React.createElement(View, {\n            style: styles.content,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 114,\n              columnNumber: 37\n            }\n          }, React.createElement(Text, {\n            style: styles.fromText,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 41\n            }\n          }, item.sender), React.createElement(Text, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 41\n            }\n          }, item.subject)), React.createElement(View, {\n            style: styles.messageDate,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 37\n            }\n          }, React.createElement(Text, {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 41\n            }\n          }, item.date)));\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }\n      }))), React.createElement(View, {\n        style: styles.footer,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 17\n        }\n      }));\n    }\n  }]);\n\n  return InboxAdmin;\n}(React.Component);\nInboxAdmin.navigationOptions = {\n  title: 'InboxAdmin'\n};\nexport default InboxAdmin;","map":{"version":3,"sources":["/Users/alexagrau/Documents/SeniorDesign/Senior-Design/screens/InboxAdmin.js"],"names":["React","Form","Button","styles","UserProfile","InboxAdmin","state","data","number","incidentNum","readYn","fetchData","fetch","response","json","users","setState","console","log","read","subject","sender","date","message","idincidents","phoneNumber","method","headers","body","JSON","stringify","redirect","then","text","result","catch","error","props","navigation","navigate","senderPass","datePass","messPass","subjectPass","idNumPass","phoneNumPass","container","header","Linking","openURL","require","asdenicLogo","frugalHubLogo","logoutButton","pageContent","subheader","leftHeader","back","backText","title","inboxBody","index","length","offset","item","toString","setRead","unread","circle","content","fromText","messageDate","footer","Component","navigationOptions"],"mappings":"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","sourcesContent":["import React from 'react'\nimport { View, Text, Image, TouchableOpacity, ScrollView, FlatList, Linking } from 'react-native'\nimport { Form, Button } from 'native-base'\nimport styles from '../Style'\nimport UserProfile from '../UserProfile'\n//import console = require('console')\n\nexport class InboxAdmin extends React.Component {\n    static navigationOptions = {\n        title: 'InboxAdmin',\n    };\n\n    state = {\n        // mail: [\n        //     {\"idmail\":1,\"to\":\"Rachael\",\"from\":\"Sarah\",\"community\":\"communidad 3\",\"date\":\"2020-05-19 07:00:15\",\"read\":0,\"urgent\":1,\"subject\":\"test email\",\"body\":\"This is a test email\",\"audio\":\"\",\"image\":\"\"},\n        //     {\"idmail\":2,\"to\":\"Rachael\",\"from\":\"Sarah\",\"community\":\"communidad 3\",\"date\":\"2020-05-19 07:00:15\",\"read\":0,\"urgent\":1,\"subject\":\"test email\",\"body\":\"This is a test email\",\"audio\":\"\",\"image\":\"\"},\n        //     {\"idmail\":3,\"to\":\"Rachael\",\"from\":\"Sarah\",\"community\":\"communidad 3\",\"date\":\"2020-05-19 07:00:15\",\"read\":0,\"urgent\":1,\"subject\":\"test email\",\"body\":\"This is a test email\",\"audio\":\"\",\"image\":\"\"},\n        //     {\"idmail\":4,\"to\":\"Rachael\",\"from\":\"Sarah\",\"community\":\"communidad 3\",\"date\":\"2020-05-19 07:00:15\",\"read\":1,\"urgent\":1,\"subject\":\"test email\",\"body\":\"This is a test email\",\"audio\":\"\",\"image\":\"\"},\n        //     {\"idmail\":5,\"to\":\"Rachael\",\"from\":\"Sarah\",\"community\":\"communidad 3\",\"date\":\"2020-05-19 07:00:15\",\"read\":0,\"urgent\":1,\"subject\":\"test email\",\"body\":\"This is a test email\",\"audio\":\"\",\"image\":\"\"},\n        //     {\"idmail\":6,\"to\":\"Rachael\",\"from\":\"Sarah\",\"community\":\"communidad 3\",\"date\":\"2020-05-19 07:00:15\",\"read\":1,\"urgent\":1,\"subject\":\"test email\",\"body\":\"This is a test email\",\"audio\":\"\",\"image\":\"\"}\n        // ],\n        data: [],\n        number: '',\n        incidentNum: '',\n        readYn: '',\n    };\n\n    fetchData = async() => {\n        // const response = await fetch ('http://10.0.0.13:3004/incidents');\n        const response = await fetch ('http://localhost:3004/incidents');\n        const users = await response.json();\n        this.setState({data: users});\n        console.log('this is fetching data');\n    }\n\n    componentDidMount() {\n        this.fetchData();\n    }\n\n    setRead (read, subject, sender, date, message, idincidents, phoneNumber) {\n        if(!read) {\n            //updates incidents in database\n            fetch(\"http://10.0.0.13:3004/incidents\", {\n                method: 'POST',\n                headers: {\"Content-Type\": \"application/json\"},\n                body: JSON.stringify({\"subject\":subject}),\n                redirect: 'follow'\n            })\n                .then(response => response.text())\n                .then(result => console.log(result))\n                .catch(error => console.log('error', error));\n        } \n        this.fetchData(); \n\n        this.props.navigation.navigate('ViewIndividualMessage',\n        {\n            senderPass: sender,\n            datePass: date,\n            messPass: message,\n            subjectPass: subject,\n            idNumPass: idincidents,\n            phoneNumPass: phoneNumber\n        });\n        this.setState({incidentNum: idincidents});\n    }\n    \n    render() {\n        return (\n            <View style={styles.container}>\n                <View style={styles.header}>\n                    <TouchableOpacity\n                        onPress={() => Linking.openURL('https://www.asdenic.org')}>\n                        <Image source={require('../assets/asdenic.png')} style={styles.asdenicLogo}/>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        onPress={() => Linking.openURL('https://www.scu.edu/engineering/labs--research/labs/frugal-innovation-hub/')}>\n                        <Image source={require('../assets/frugalHub.png')} style={styles.frugalHubLogo}/>\n                    </TouchableOpacity>\n\n                    <TouchableOpacity\n                        onPress={() => this.props.navigation.navigate('Welcome')}>\n                        <Text style={styles.logoutButton}>Cerrar sesión</Text>\n                    </TouchableOpacity>\n                </View>\n\n                <View style={styles.pageContent}>\n                    <View style={styles.subheader}>\n                        <View style={styles.leftHeader}>\n                            <Button style={styles.back}\n                                onPress={() => this.props.navigation.navigate('WaterHomeAdmin')}>\n                                <Text style={styles.backText}>{'<'} Atrás</Text>\n                            </Button>\n                        </View>\n                    </View>\n\n                    <Text style={styles.title}>Buzón de mensajes</Text>\n                    \n                    <View style={styles.inboxBody}>\n                        <FlatList inverted data={this.state.data} \n                            getItemLayout={(data, index) => (\n                                {length: 70, offset: 70 * index, index}\n                            )}\n                            initialScrollIndex={this.state.data.length - 1}\n                            keyExtractor={(item, index) => index.toString()}\n                            renderItem={({ item, index }) =>\n                            <Button style={styles.message} onPress={() => this.setRead(item.readYn, item.subject, item.sender, item.date, item.message, item.idincidents, item.phoneNumber)}>\n                                    <View style={styles.unread}>\n                                    {item.readYn\n                                        ? <Text></Text>\n                                        : <Image source={require('../assets/blue-circle.png')} style={styles.circle}/>\n                                    }\n                                    </View>\n                                    <View style={styles.content}>\n                                        <Text style={styles.fromText}>{item.sender}</Text>\n                                        <Text>{item.subject}</Text>\n                                    </View>\n                                    <View style={styles.messageDate}>\n                                        <Text>{item.date}</Text>\n                                    </View>\n                            </Button>}\n                        />\n                    </View>\n                </View>\n\n                <View style={styles.footer}>\n                </View>\n\n            </View>\n        );\n    }\n}\n\nexport default InboxAdmin;"]},"metadata":{},"sourceType":"module"}